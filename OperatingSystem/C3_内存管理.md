# 内存管理

[TOC]

## 内存基础知识

![image-20210807134403986](Images/image-20210807134403986.png)

### 逻辑地址 vs 物理地址

![image-20210807134514454](Images/image-20210807134514454.png)

### 从写程序到运行

![image-20210807134738001](Images/image-20210807134738001.png)

### 三种链接方式

![image-20210807134845348](Images/image-20210807134845348.png)

![image-20210807134929096](Images/image-20210807134929096.png)

![image-20210807135025483](Images/image-20210807135025483.png)

### 三种装入方式

![image-20210807135059171](Images/image-20210807135059171.png)

![image-20210807135126766](Images/image-20210807135126766.png)

![image-20210807135155917](Images/image-20210807135155917.png)

## 内存管理的概念

![image-20210807140010760](Images/image-20210807140010760.png)

### 内存空间的分配与回收

![image-20210807140055096](Images/image-20210807140055096.png)

### 内存空间的扩充（虚拟性）

![image-20210807140127892](Images/image-20210807140127892.png)

### 地址转换(装入方式)

![image-20210807140234558](Images/image-20210807140234558.png)

### 内存保护

> 操作系统需要提供==内存保护==功能。保证==各进程在各自存储空间内运行，互不干扰==

![image-20210807140339206](Images/image-20210807140339206.png)

![image-20210807140939045](Images/image-20210807140939045.png)

## 覆盖与交换=>扩充内存空间



![image-20210807141955371](Images/image-20210807141955371.png)

![image-20210807142051134](Images/image-20210807142051134.png)

### 覆盖

![image-20210807142115138](Images/image-20210807142115138.png)

![image-20210807142128698](Images/image-20210807142128698.png)

### 交换技术

![image-20210807142232748](Images/image-20210807142232748.png)

![image-20210807142247575](Images/image-20210807142247575.png)

## 连续分配管理

![image-20210807144333605](Images/image-20210807144333605.png)

![image-20210807144350526](Images/image-20210807144350526.png)

### 单一连续分配

![image-20210807144411813](Images/image-20210807144411813.png)

### 固定分区分配

![image-20210807144433924](Images/image-20210807144433924.png)

![image-20210807144450262](Images/image-20210807144450262.png)

### 动态分区分配

> ==动态分区分配（可变分区分配）==这种分配方式==不会预先划分内存分区==，而是在进程装入内存时， ==根据进程的大小动态地建立分区==，并使分区的==大小正好适合==进程的需要。因此系统分区的大小和数目是可变的。（eg：假设某计算机内存大小为64MB，系统区8MB，用户区共 56 MB…）
>
> ![image-20210807144946204](Images/image-20210807144946204.png)

#### 采用什么数据结构用来记录

![image-20210807144724339](Images/image-20210807144724339.png)

#### 分配算法

![image-20210807144741703](Images/image-20210807144741703.png)

![image-20210807150437651](Images/image-20210807150437651.png)

##### 首次适应

![image-20210807150534238](Images/image-20210807150534238.png)

##### 最佳适应

![image-20210807150601226](Images/image-20210807150601226.png)

##### 最坏适应(最大适应)

![image-20210807150655101](Images/image-20210807150655101.png)

##### 临近适应

![image-20210807150711203](Images/image-20210807150711203.png)

#### 如何回收

![image-20210807144847042](Images/image-20210807144847042.png)

![image-20210807144857252](Images/image-20210807144857252.png)

![image-20210807144905308](Images/image-20210807144905308.png)

![image-20210807144912982](Images/image-20210807144912982.png)

## 基本分页存储管理概念

![image-20210808101853466](Images/image-20210808101853466.png)

![image-20210808101914183](Images/image-20210808101914183.png)

### 什么是分页存储

![image-20210808102032436](Images/image-20210808102032436.png)

### 页表

![image-20210808102103315](Images/image-20210808102103315.png)

![image-20210808102118526](Images/image-20210808102118526.png)

![image-20210808102144733](Images/image-20210808102144733.png)

![image-20210808102217680](Images/image-20210808102217680.png)

![image-20210808102246563](Images/image-20210808102246563.png)

### 如何得到页号与页内偏移量

![image-20210808102335552](Images/image-20210808102335552.png)

![image-20210808102347751](Images/image-20210808102347751.png)

![image-20210808102402447](Images/image-20210808102402447.png)

![image-20210808102427333](Images/image-20210808102427333.png)

![image-20210808102445211](Images/image-20210808102445211.png)

## 基本地址变换机构

![image-20210808112048039](Images/image-20210808112048039.png)

![image-20210808112118907](Images/image-20210808112118907.png)

![image-20210808112136119](Images/image-20210808112136119.png)

![image-20210808112255365](Images/image-20210808112255365.png)

![image-20210808112310106](Images/image-20210808112310106.png)

![image-20210808112323642](Images/image-20210808112323642.png)

![image-20210808112336734](Images/image-20210808112336734.png)

## 具有快表的地址变换机构

![image-20210808115523310](Images/image-20210808115523310.png)

![image-20210808115550112](Images/image-20210808115550112.png)

### 什么是快表

![image-20210808115607051](Images/image-20210808115607051.png)

### 访存流程

![image-20210808115618876](Images/image-20210808115618876.png)

![image-20210808115627878](Images/image-20210808115627878.png)

![image-20210808115646098](Images/image-20210808115646098.png)

### 局部性原理

![image-20210808115656635](Images/image-20210808115656635.png)

## 两级页表

![image-20210808122029732](Images/image-20210808122029732.png)

### 单级页表存在的问题

![image-20210808122100315](Images/image-20210808122100315.png)

![image-20210808122113822](Images/image-20210808122113822.png)

### 页表过大解决方案

![image-20210808122214502](Images/image-20210808122214502.png)

![image-20210808122228869](Images/image-20210808122228869.png)

![image-20210808122243194](Images/image-20210808122243194.png)

### 常驻内存解决方案

![image-20210808122403317](Images/image-20210808122403317.png)

### 如何实现地址转换

![image-20210808122256842](Images/image-20210808122256842.png)

### 细节

![image-20210808122426387](Images/image-20210808122426387.png)