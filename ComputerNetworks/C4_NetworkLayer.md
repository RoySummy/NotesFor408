# 网络层

![image-20210616202403537](Images/image-20210616202403537.png)

## 功能

![image-20210616202443872](Images/image-20210616202443872.png)

拥塞控制是全局性的，流量控制是针对发送方的。

## IP数据报格式

![image-20210616204003710](Images/image-20210616204003710.png)

![image-20210616204015165](Images/image-20210616204015165.png)

![image-20210616204043261](Images/image-20210616204043261.png)

1. 版本：IPv4/IPv6
2. 首部长度：单位是==4B==，最小为5
3. 区分服务：指示期望获得什么服务
4. 总长度：首部+数据，单位==1B==
5. 生存时间(TTL)：经过一个路由器-1，变成0则丢弃
6. 协议：数据部分的协议，TCP对应6，UDP对应17
7. 首部检验和：只检验首部。
8. 可选字段：0~40B，用来支持排错、测量以及安全等措施
9. 填充：全0，把首部填充成4B的整数倍

## 分片

![image-20210616211710319](Images/image-20210616211710319.png)

![image-20210616211727336](Images/image-20210616211727336.png)

## IP地址

  ![image-20210617202147689](Images/image-20210617202147689.png)

![image-20210617202159758](Images/image-20210617202159758.png)

![image-20210617202219502](Images/image-20210617202219502.png)

![image-20210617202246454](Images/image-20210617202246454.png)

## NAT

路由器对目的地址是私有地址的数据报一律不进行转发

![image-20210617203356752](Images/image-20210617203356752.png)